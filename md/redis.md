# 介绍

全称：Remote Dictionary Server(远程字典服务)，默认使用6379端口，通过redis-cli命令行工具交互，应用程序中可通过各语言版本客户端程序（如jdies）交互，桌面端可使用redis    insight软件交互。redis有社区版和企业版，社区版免费，但为单线程，集群部署需要自行配置，只支持基础持久化功能，不支持json（只能序列化后使用string存储），适合5w以下qps使用

# 数据类型

1. string，可存储文本/图片/序列号对象，最大512mb，支持原子递增递减操作（将数字保存在string中，然后用来做计数器）

2. hash，存储键值对，每个hash可存储大概40亿个键值对；redis的key中经常包含:，它通常约定用来做命名空间，比如user:1001代表编号为1001的用户，使用redis可视化客户端时，会根据:分组显示

3. list，列表，使用链表实现（这意味着它通过索引访问不那么快，但在很长的list末尾操作元素时非常快的）

4. set，无序唯一集合，适合做标签系统（给每个客户打多个唯一的标签）或者记录每个用户的好友然后取共同好友

5. sorted set，有序集合，根据score排序（添加元素时，需要指定元素的分数和值），分数相同时按照值的字典顺序排序

6. HyperLogLog，概率算法计算集合中不重复元素的数量，固定使用12kb的空间，误差小于1%，常用语uv统计（还支持合并命令，比如按日期记录每一天，然后合并当月所有天计算月度访问量）

# 持久化

1. rdb，默认开启，定时生成内存快照，恢复速度快，但可能会丢失最后一次快照后的数据；备份快照的周期可配置，比如设置300秒内至少10个key发生变化则触发

2. aof，默认关闭，记录所有操作命令，文本协议格式（可读），恢复速度慢（需要回访所有命令）；两种机制可混合使用，rdb全量+aof增量恢复（需要切割aof拿到rdb后的日志）

# 其他

1. 安装redis后，redis自动创建了一个用户组，当前用户需要加入用户组并重新登录后才能修改redis的配置文件

2. redis默认只允许本地连接，远程连接会报错，需要修改配置文件放开限制或将客户端ip地址添加到配置文件中（修改bind 0.0.0.0和protected-mode no）

3. redis也支持事务，开启事务后可以发起一系列命令，这些命令按顺序执行，执行过程中不会有其他客户端的命令执行（单线程），保证全部成功或者整体失败

4. redis-cli登录Redis，CONFIG GET dir命令获取dump文件目录，这个文件就是rdb持久化的文件；想清除redis中的数据，可以先停机，删除dump文件后再重启，数据就清空了

5. 批量执行指令，正常是客户端发送指令，等待服务端返回指令结果，也可以客户端连续发送多条指令，然后一次性接收所有结果。这种方式对性能提升很大，尤其是在网络较慢的环境中
